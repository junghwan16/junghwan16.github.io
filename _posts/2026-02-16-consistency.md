---
layout: single
title: "일관성(Consistency)이란 무엇인가"
date: 2026-02-16 14:00:00 +0900
categories: [backend, infrastructure]
---

컴퓨터 과학에서 일관성(Consistency)이란 **시스템의 모든 노드가 동일한 데이터를 보도록 보장하는 성질**이다.

즉, 누가 어디서 데이터를 읽든 같은 값을 보느냐가 핵심이다.

---

## 예시

상황을 하나 생각해 보자.

1. A 사용자가 은행 계좌에 10만원을 입금한다.
2. 바로 이어서 B 사용자가 잔액을 조회한다.

**일관성이 보장되면?**
B는 반드시 10만원이 증가된 금액을 본다. A와 B가 다른 상태를 볼 수 없다.

**일관성이 약하다면?**
어떤 서버는 아직 갱신 전이라 예전 잔액이 보일 수도 있다.

---

## CAP 이론에서의 일관성

분산 시스템에서 말하는 일관성은 특히 CAP 이론에서 중요하다.

- **C**(Consistency): 모든 노드가 같은 데이터를 봄
- **A**(Availability): 항상 응답함
- **P**(Partition Tolerance): 네트워크 단절을 견딤

여기서 C는 정확히 말하면 **Strong Consistency(강한 일관성)**이다. 어떤 읽기(read) 요청이든 가장 최신 쓰기(write) 결과를 반환한다는 뜻이다.

---

## 일관성의 종류

일관성은 단계가 있다.

**강한 일관성 (Strong Consistency)**

- 항상 최신 데이터를 보장한다.
- 은행, 결제 시스템에 중요하다.
- 대신 속도와 가용성이 희생될 수 있다.

**약한 일관성 (Weak Consistency)**

- 최신이 아닐 수도 있다.
- 대신 빠르고 가용성이 높다.

**최종 일관성 (Eventual Consistency)**

- 지금은 노드마다 다를 수 있지만, 시간이 지나면 결국 같아진다.
- 예: SNS 좋아요 수, DNS 전파

---

직관적으로 비교하면:

- **가용성**: 항상 응답함
- **일관성**: 항상 최신 데이터임

둘은 비슷해 보이지만 완전히 다른 개념이다.

---

## 실무에서는 어디까지 일관성을 요구할 것인가

| 시스템        | 일관성 수준      | 이유                                         |
| ------------- | ---------------- | -------------------------------------------- |
| 쇼핑몰 재고   | 강한 일관성      | 초과 판매를 막아야 한다                      |
| 유튜브 조회수 | 최종 일관성      | 잠깐 다르게 보여도 문제없다                  |
| 채팅 메시지   | 경우에 따라 다름 | 순서 보장이 중요하면 강하게, 아니면 느슨하게 |

시스템을 설계할 때 "어디까지 일관성을 요구할 것인가?"는 가장 중요한 결정 중 하나다. 강하게 잡으면 안전하지만 느려질 수 있고, 약하게 잡으면 빠르지만 잠깐 다른 값을 볼 수 있다.
